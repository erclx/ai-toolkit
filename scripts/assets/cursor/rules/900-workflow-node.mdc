---
description: Enforce_strict_node_workflow_verification_and_staging_handoff
globs: "package.json,**/*.ts,**/*.tsx,**/*.js,**/*.jsx"
alwaysApply: false
priority: 900
---

# NODE WORKFLOW STANDARDS

## AGENT OPERATING PROCEDURE

### 1. Planning Phase

- Analyze the request and output a numbered implementation plan.
- Identify strictly necessary file creations and modifications.
- Wait for user confirmation before executing destructive actions.

### 2. Execution Phase

- Implement changes iteratively focusing on one logical concern.
- Apply the Zero-Bloat principle to all code changes.
- Ensure all new files adhere to strict file hygiene.

### 3. Verification Phase (Fail-Fast Sequence)

- **Step 1 (Style Compliance):** Execute `bun run format`. Stop immediately if it fails.
- **Step 2 (Static Analysis):** Execute `bun run lint:fix`. Stop immediately if it fails.
- **Step 3 (Type Safety):** Execute `bun run typecheck`. Stop immediately if it fails.
- **Step 4 (Logic Verification):** Execute `bun run test`. Stop immediately if it fails.
- **Step 5 (Integration):** Execute `bun run build`. Stop immediately if it fails.

### 4. Handoff Phase

- Stage verified files using `git add` individually.
- Confirm the staging area status with `git status`.
- Signal completion to the user without committing.

## NEGATIVE CONSTRAINTS

- Do not run the heavy `bun run check` script first; use the fail-fast sequence.
- Do not modify code without a preceding plan step.
- Do not commit code that fails any verification step.
- Do not execute `git commit` as an agent.
- Do not proceed to the next step if the previous one fails.