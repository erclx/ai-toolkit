---
description: Enforce_strict_node_workflow_and_verification_loops
globs: "package.json,**/*.ts,**/*.tsx,**/*.js,**/*.jsx"
alwaysApply: false
priority: 900
---

# NODE WORKFLOW STANDARDS

## AGENT OPERATING PROCEDURE

### 1. Planning Phase

- Analyze the request and output a concise, numbered implementation plan.
- Identify strictly necessary file creations, modifications, and deletions.
- Wait for user confirmation before executing complex or destructive actions.

### 2. Execution Phase

- Implement changes iteratively, focusing on one logical concern at a time.
- Apply the "Zero-Bloat" principle to all code changes.
- Ensure all new files adhere to strict file hygiene (one newline at EOF).

### 3. Verification Phase (Fail-Fast Sequence)

- **Step 1 (Lint):** Run `bun run lint:fix` to catch syntax errors immediately.
- **Step 2 (Types):** Run `bun run typecheck` to ensure contract safety.
- **Step 3 (Test):** Run `bun run test` to verify logic isolation.
- **Step 4 (Build):** Run `bun run build` to validate the full bundle chain.

### 4. Delivery Phase

- Stage specific files using `git add <file>` (never use dot).
- Execute the commit using `git commit -m "type(scope): subject"`.
- Ensure the commit subject is strictly lowercase and under 72 characters.

## DEFINITION OF DONE

- Linting and Formatting must pass.
- TypeScript compilation must succeed.
- Tests must pass.
- Build must succeed.
- Changes must be **COMMITTED** to git.

## NEGATIVE CONSTRAINTS

- Do not stop at code generation; you MUST Verify and Commit.
- Do not run a heavy "verify-all" script if a faster "lint" script fails first.
- Do not commit code that fails the Build step.
- Do not leave "TODO" comments; implement the logic or reject the feature.