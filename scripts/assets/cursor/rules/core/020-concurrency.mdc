---
description: enforce safe concurrency and async operation patterns
alwaysApply: true
priority: 20
---

# CONCURRENCY STANDARDS

## Async Lifecycle

- Make async operations cancellable; clean up on scope exit or caller cancellation.
- Coordinate dependent async operations explicitly; document execution order.
- Set explicit timeouts on all external async operations.
- Do not fire-and-forget async operations without cleanup handlers.

## Race Conditions

- Do not ignore race conditions in concurrent flows.
- Protect shared mutable state with locks, queues, or single-writer patterns.

## Failure Handling

- Handle partial failures in batched operations independently; do not fail the entire batch for a single error.
