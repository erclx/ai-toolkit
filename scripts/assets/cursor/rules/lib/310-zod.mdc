---
description: enforce zod schema validation and type inference
globs: "**/*.ts,**/*.tsx"
alwaysApply: false
priority: 310
---

# ZOD VALIDATION STANDARDS

## HARD REQUIREMENTS

- Use `z.infer<typeof Schema>` to generate TypeScript types (Single Source of Truth).
- Use `.strict()` for untrusted external API boundaries to prevent data pollution.
- Use `.parse()` for blocking validation (env vars) and `.safeParse()` for recoverable flows (forms).
- Restrict `z.coerce` usage strictly to I/O boundaries (e.g., URL params); never use for internal data flow.

## NEGATIVE CONSTRAINTS

- Do not manually declare interfaces that duplicate Zod schemas.
- Do not use `z.any()`; use `z.unknown()` for truly ambiguous inputs.
- Do not use `.passthrough()`; prefer `.strict()` at boundaries or explicit `.pick()`/`.omit()`.
- Do not export the runtime Schema if only the inferred Type is required by consumers.